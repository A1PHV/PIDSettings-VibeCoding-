# PID Tuner - Python Version

**–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–∞—Å—á–µ—Ç PID –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–æ–≤ –∏–∑ –ª–æ–≥–æ–≤ Ardupilot**

Python –≤–µ—Ä—Å–∏—è –ø—Ä–æ–≥—Ä–∞–º–º—ã —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π:
- ‚úÖ **.bin –ª–æ–≥–∏** —Å SD-–∫–∞—Ä—Ç—ã (DataFlash —Ñ–æ—Ä–º–∞—Ç)
- ‚úÖ **.log –ª–æ–≥–∏** (—Ç–µ–∫—Å—Ç–æ–≤—ã–π —Ñ–æ—Ä–º–∞—Ç)
- ‚úÖ **.csv –ª–æ–≥–∏** (—ç–∫—Å–ø–æ—Ä—Ç –∏–∑ Mission Planner)
- ‚úÖ **–ü–æ—Ä—Ç–∞—Ç–∏–≤–Ω—ã–π .exe** –±–µ–∑ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç (–ü–æ—Ä—Ç–∞—Ç–∏–≤–Ω–∞—è –≤–µ—Ä—Å–∏—è)

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ì–æ—Ç–æ–≤—ã–π .exe —Ñ–∞–π–ª (–†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø)

1. **–°–∫–∞—á–∞–π—Ç–µ `pid_tuner.exe`** –∏–∑ —Ä–µ–ª–∏–∑–æ–≤
2. **–ü–æ–ª–æ–∂–∏—Ç–µ –≤ –ª—é–±—É—é –ø–∞–ø–∫—É**
3. **–û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–º–∞–Ω–¥–Ω—É—é —Å—Ç—Ä–æ–∫—É** –≤ —ç—Ç–æ–π –ø–∞–ø–∫–µ
4. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ:**
   ```cmd
   pid_tuner.exe analyze -i your_flight.bin
   ```

**–ù–µ –Ω—É–∂–µ–Ω Python! –ù–µ –Ω—É–∂–µ–Ω –∏–Ω—Ç–µ—Ä–Ω–µ—Ç! –ü—Ä–æ—Å—Ç–æ —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ .exe –Ω–∞ –ª—é–±–æ–π –∫–æ–º–ø—å—é—Ç–µ—Ä!**

---

## üì¶ –°–±–æ—Ä–∫–∞ .exe (–µ—Å–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å –∏–Ω—Ç–µ—Ä–Ω–µ—Ç)

### Windows:

1. **–û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–º–∞–Ω–¥–Ω—É—é —Å—Ç—Ä–æ–∫—É** –≤ –ø–∞–ø–∫–µ `python_version`
2. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ:**
   ```cmd
   build_exe.bat
   ```
3. **–ì–æ—Ç–æ–≤–æ!** –§–∞–π–ª `pid_tuner.exe` –±—É–¥–µ—Ç –≤ –ø–∞–ø–∫–µ `dist`

### Linux/Mac:

```bash
chmod +x build_exe.sh
./build_exe.sh
```

–§–∞–π–ª `pid_tuner` –±—É–¥–µ—Ç –≤ –ø–∞–ø–∫–µ `dist`

---

## üíª –ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ Python (–µ—Å–ª–∏ .exe –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç)

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π:

```bash
pip install -r requirements.txt
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:

```bash
python pid_tuner.py analyze -i your_flight.bin
```

---

## üìñ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ê–Ω–∞–ª–∏–∑ .bin –ª–æ–≥–∞ —Å SD-–∫–∞—Ä—Ç—ã

```bash
# Windows (.exe)
pid_tuner.exe analyze -i 00000001.bin

# Python
python pid_tuner.py analyze -i 00000001.bin
```

### –ê–Ω–∞–ª–∏–∑ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –æ—Å–∏

```bash
# –¢–æ–ª—å–∫–æ Roll
pid_tuner.exe analyze -i flight.bin -a roll

# –¢–æ–ª—å–∫–æ Pitch
pid_tuner.exe analyze -i flight.bin -a pitch

# –¢–æ–ª—å–∫–æ Yaw
pid_tuner.exe analyze -i flight.bin -a yaw

# –¢–æ–ª—å–∫–æ Altitude
pid_tuner.exe analyze -i flight.bin -a alt
```

### –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

```bash
# –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ JSON –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã Ardupilot
pid_tuner.exe analyze -i flight.bin -o results.json

# –ë—É–¥–µ—Ç —Å–æ–∑–¥–∞–Ω–æ:
# - results.json - —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤ JSON
# - results.params - –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–ª—è Ardupilot
```

### –ú–µ—Ç–æ–¥—ã –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

```bash
# Ziegler-Nichols (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é, –¥–ª—è –Ω–∞—á–∏–Ω–∞—é—â–∏—Ö)
pid_tuner.exe analyze -i flight.bin -m ziegler-nichols

# Relay Method (–±–æ–ª–µ–µ —Ç–æ—á–Ω—ã–π)
pid_tuner.exe analyze -i flight.bin -m relay

# System Identification (–∞–¥–∞–ø—Ç–∏–≤–Ω—ã–π)
pid_tuner.exe analyze -i flight.bin -m manual
```

### –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö –≤ CSV

```bash
pid_tuner.exe extract -i flight.bin -o data.csv
```

---

## üìÅ –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã

### 1. .bin —Ñ–∞–π–ª—ã (–û–°–ù–û–í–ù–û–ô)
- –õ–æ–≥–∏ —Å SD-–∫–∞—Ä—Ç—ã Pixhawk/Ardupilot
- –ü—É—Ç—å –Ω–∞ SD: `APM/LOGS/00000XXX.BIN`
- –ü—Ä–æ—Å—Ç–æ –≤—Å—Ç–∞–≤—å—Ç–µ SD-–∫–∞—Ä—Ç—É –∏ —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª—ã

### 2. .log —Ñ–∞–π–ª—ã
- –¢–µ–∫—Å—Ç–æ–≤—ã–π —Ñ–æ—Ä–º–∞—Ç Ardupilot
- –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–π—Ç–µ –∏–∑ .bin –≤ Mission Planner

### 3. .csv —Ñ–∞–π–ª—ã
- –≠–∫—Å–ø–æ—Ä—Ç –∏–∑ Mission Planner:
  1. Ctrl+F ‚Üí "Log Browse"
  2. –û—Ç–∫—Ä–æ–π—Ç–µ .bin –ª–æ–≥
  3. –ù–∞–∂–º–∏—Ç–µ "Export to CSV"

---

## üéØ –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ü—Ä–∏–º–µ—Ä 1: –ê–Ω–∞–ª–∏–∑ –ø–æ–ª–µ—Ç–∞ –∫–≤–∞–¥—Ä–æ–∫–æ–ø—Ç–µ—Ä–∞

```bash
pid_tuner.exe analyze -i copter_flight.bin -o copter_pids.json
```

–†–µ–∑—É–ª—å—Ç–∞—Ç:
```
üìà Calculated PID Coefficients:
Method: ziegler-nichols
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
Roll:     P: 0.0450, I: 0.0900, D: 0.0056
Pitch:    P: 0.0450, I: 0.0900, D: 0.0056
Yaw:      P: 0.1800, I: 0.0180, D: 0.0000
Altitude: P: 1.0000, I: 0.5000, D: 0.0000

üíæ Results saved to: copter_pids.json
üíæ Ardupilot parameters saved to: copter_pids.params

‚ö†Ô∏è  –í–ê–ñ–ù–û: –ù–∞—á–Ω–∏—Ç–µ —Å 70% –æ—Ç —Ä–∞—Å—Å—á–∏—Ç–∞–Ω–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π!
```

### –ü—Ä–∏–º–µ—Ä 2: –¢–æ–Ω–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ Roll –æ—Å–∏

```bash
pid_tuner.exe analyze -i tuning_flight.bin -a roll -m relay -o roll_fine.json
```

### –ü—Ä–∏–º–µ—Ä 3: –ê–Ω–∞–ª–∏–∑ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –ª–æ–≥–æ–≤

```bash
for %%f in (*.bin) do (
    echo Analyzing %%f...
    pid_tuner.exe analyze -i %%f -o %%f.json
)
```

---

## üîß –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

### 1. –û—Ç–∫—Ä—ã—Ç—å —Ñ–∞–π–ª .params

–ü—Ä–æ–≥—Ä–∞–º–º–∞ —Å–æ–∑–¥–∞–µ—Ç —Ñ–∞–π–ª `results.params`:
```
ATC_RAT_RLL_P 0.0450
ATC_RAT_RLL_I 0.0900
ATC_RAT_RLL_D 0.0056
ATC_RAT_PIT_P 0.0450
ATC_RAT_PIT_I 0.0900
ATC_RAT_PIT_D 0.0056
...
```

### 2. –£–º–Ω–æ–∂–∏—Ç—å –Ω–∞ 0.7 –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

```
Roll P: 0.0450 √ó 0.7 = 0.0315
Roll I: 0.0900 √ó 0.7 = 0.0630
Roll D: 0.0056 √ó 0.7 = 0.0039
```

### 3. –ü—Ä–∏–º–µ–Ω–∏—Ç—å –≤ Mission Planner

1. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ Pixhawk
2. Config ‚Üí Full Parameter List
3. –ù–∞–π–¥–∏—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, `ATC_RAT_RLL_P`)
4. –í–≤–µ–¥–∏—Ç–µ –Ω–æ–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è (√ó 0.7!)
5. –ù–∞–∂–º–∏—Ç–µ "Write Params"

### 4. –¢–µ—Å—Ç–æ–≤—ã–π –ø–æ–ª–µ—Ç

- –õ–µ—Ç–∞–π—Ç–µ –æ—Å—Ç–æ—Ä–æ–∂–Ω–æ!
- –ó–∞–ø–∏—Å—ã–≤–∞–π—Ç–µ –Ω–æ–≤—ã–π –ª–æ–≥
- –ü–æ–≤—Ç–æ—Ä–∏—Ç–µ –∞–Ω–∞–ª–∏–∑ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏

---

## üìã –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –¥–ª—è —Ö–æ—Ä–æ—à–µ–≥–æ –∞–Ω–∞–ª–∏–∑–∞

### –•–æ—Ä–æ—à–∏–π –ª–æ–≥ —Å–æ–¥–µ—Ä–∂–∏—Ç:
- ‚úÖ 30-60 —Å–µ–∫—É–Ω–¥ –ø–æ–ª–µ—Ç–∞
- ‚úÖ –ê–∫—Ç–∏–≤–Ω—ã–µ –º–∞–Ω–µ–≤—Ä—ã (–¥–≤–∏–∂–µ–Ω–∏—è —Å—Ç–∏–∫–æ–≤)
- ‚úÖ –ü–ª–∞–≤–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
- ‚úÖ –†–µ–∂–∏–º Stabilize –∏–ª–∏ AltHold

### –ò–∑–±–µ–≥–∞–π—Ç–µ:
- ‚ùå –ö—Ä–∞—à–µ–π –∏ –ø–∞–¥–µ–Ω–∏–π
- ‚ùå –°—Ç–∞—Ç–∏—á–Ω–æ–≥–æ –∑–∞–≤–∏—Å–∞–Ω–∏—è
- ‚ùå –°–ª–∏—à–∫–æ–º –∫–æ—Ä–æ—Ç–∫–∏–µ –ª–æ–≥–∏ (<10 —Å–µ–∫)
- ‚ùå –õ–æ–≥–∏ —Å –æ—à–∏–±–∫–∞–º–∏ –¥–∞—Ç—á–∏–∫–æ–≤

---

## ‚ùì –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –û—à–∏–±–∫–∞: "pymavlink is required"

**–ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ Python:**
```bash
pip install pymavlink
```

**–ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ .exe:**
- –≠—Ç–æ –Ω–µ –¥–æ–ª–∂–Ω–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç—å! –ü–µ—Ä–µ—Å–æ–±–µ—Ä–∏—Ç–µ .exe
- –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≥–æ—Ç–æ–≤—ã–π .exe –∏–∑ —Ä–µ–ª–∏–∑–æ–≤

### –û—à–∏–±–∫–∞: "Insufficient data points"

- –õ–æ–≥ —Å–ª–∏—à–∫–æ–º –∫–æ—Ä–æ—Ç–∫–∏–π
- –ù—É–∂–Ω–æ –º–∏–Ω–∏–º—É–º 10 —Å–µ–∫—É–Ω–¥ –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –ø–æ–ª–µ—Ç–∞
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤ –ª–æ–≥–µ –µ—Å—Ç—å –º–∞–Ω–µ–≤—Ä—ã

### –û—à–∏–±–∫–∞: "Failed to parse log"

- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–æ—Ä–º–∞—Ç —Ñ–∞–π–ª–∞ (.bin/.log/.csv)
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ñ–∞–π–ª –Ω–µ –ø–æ–≤—Ä–µ–∂–¥–µ–Ω
- –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –≤ .csv —á–µ—Ä–µ–∑ Mission Planner

### .exe –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è

- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Windows Defender / –∞–Ω—Ç–∏–≤–∏—Ä—É—Å
- –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∑–∞–ø—É—Å—Ç–∏—Ç—å –æ—Ç –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Python –≤–µ—Ä—Å–∏—é –Ω–∞–ø—Ä—è–º—É—é

---

## üèóÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
python_version/
‚îú‚îÄ‚îÄ pid_tuner.py       # –ì–ª–∞–≤–Ω—ã–π —Å–∫—Ä–∏–ø—Ç
‚îú‚îÄ‚îÄ models.py          # –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö
‚îú‚îÄ‚îÄ log_parser.py      # –ü–∞—Ä—Å–µ—Ä –ª–æ–≥–æ–≤ (.bin/.log/.csv)
‚îú‚îÄ‚îÄ pid_calculator.py  # –ê–ª–≥–æ—Ä–∏—Ç–º—ã PID
‚îú‚îÄ‚îÄ requirements.txt   # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ Python
‚îú‚îÄ‚îÄ build_exe.py       # –°–∫—Ä–∏–ø—Ç —Å–±–æ—Ä–∫–∏ .exe
‚îú‚îÄ‚îÄ build_exe.bat      # Windows —Å–±–æ—Ä–∫–∞
‚îú‚îÄ‚îÄ build_exe.sh       # Linux/Mac —Å–±–æ—Ä–∫–∞
‚îî‚îÄ‚îÄ README.md          # –≠—Ç–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```

---

## üî¨ –ê–ª–≥–æ—Ä–∏—Ç–º—ã

### 1. Ziegler-Nichols
- –ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π –º–µ—Ç–æ–¥
- –û—Å–Ω–æ–≤–∞–Ω –Ω–∞ –∞–Ω–∞–ª–∏–∑–µ –∫–æ–ª–µ–±–∞–Ω–∏–π
- –ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ —Å–∏—Å—Ç–µ–º

### 2. Relay Method
- –ú–µ—Ç–æ–¥ √Östr√∂m-H√§gglund
- –ë–æ–ª–µ–µ –∫–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω—ã–π
- –õ—É—á—à–µ –¥–ª—è –Ω–µ—Å—Ç–∞–±–∏–ª—å–Ω—ã—Ö —Å–∏—Å—Ç–µ–º

### 3. System Identification
- –ú–µ—Ç–æ–¥ –Ω–∞–∏–º–µ–Ω—å—à–∏—Ö –∫–≤–∞–¥—Ä–∞—Ç–æ–≤
- –ê–¥–∞–ø—Ç–∏–≤–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞
- –£—á–∏—Ç—ã–≤–∞–µ—Ç —Å–ø–µ—Ü–∏—Ñ–∏–∫—É –ø–æ–ª–µ—Ç–∞

–ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ –≤ —Ñ–∞–π–ª–µ `ALGORITHMS.md` –≤ –∫–æ—Ä–Ω–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è.

---

## üìù –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License

---

## ü§ù –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü–æ –≤–æ–ø—Ä–æ—Å–∞–º —Å–æ–∑–¥–∞–≤–∞–π—Ç–µ Issues –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ GitHub.

---

## üéì –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

- [Ardupilot PID Tuning Guide](https://ardupilot.org/copter/docs/tuning.html)
- [Mission Planner Documentation](https://ardupilot.org/planner/)
- [DataFlash Log Format](https://ardupilot.org/dev/docs/logmessages.html)
